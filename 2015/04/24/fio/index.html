

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>fio | Lingfei&#39;s Blog</title>
  <meta name="author" content="Lingfei Kong">
  
  <meta name="description" content="读书笔记，资料整理">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="fio"/>
  <meta property="og:site_name" content="Lingfei&#39;s Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="http://kongll.github.io/atom.xml" title="Lingfei&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ffe3814b5f53cc394a493cbeb2368f2af' type='text/javascript'%3E%3C/script%3E"));
</script>



</head>


<body>
  <header id="header" class="inner">
<div class="alignleft">
  <h1><a href="/">Lingfei&#39;s Blog</a></h1>
  <h2><a href="/">我要扼住命运的咽喉，决不能让命运使我屈服</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/categories/Technology">技术</a></li>
    
      <li><a href="/categories/essay">随笔</a></li>
    
      <li><a href="/archives">归档</a></li>
    
      <li><a href="/about">关于</a></li>
    
	<li> <a href="/atom.xml">RSS</a> </li>
<li> <a title="把这个链接拖到你的Chrome收藏夹工具栏中" href='javascript:(function() {
	function c() {
		var e = document.createElement("link");
		e.setAttribute("type", "text/css");
		e.setAttribute("rel", "stylesheet");
		e.setAttribute("href", f);
		e.setAttribute("class", l);
		document.body.appendChild(e)
	}
 
	function h() {
		var e = document.getElementsByClassName(l);
		for (var t = 0; t < e.length; t++) {
			document.body.removeChild(e[t])
		}
	}
 
	function p() {
		var e = document.createElement("div");
		e.setAttribute("class", a);
		document.body.appendChild(e);
		setTimeout(function() {
			document.body.removeChild(e)
		}, 100)
	}
 
	function d(e) {
		return {
			height : e.offsetHeight,
			width : e.offsetWidth
		}
	}
 
	function v(i) {
		var s = d(i);
		return s.height > e && s.height < n && s.width > t && s.width < r
	}
 
	function m(e) {
		var t = e;
		var n = 0;
		while (!!t) {
			n += t.offsetTop;
			t = t.offsetParent
		}
		return n
	}
 
	function g() {
		var e = document.documentElement;
		if (!!window.innerWidth) {
			return window.innerHeight
		} else if (e && !isNaN(e.clientHeight)) {
			return e.clientHeight
		}
		return 0
	}
 
	function y() {
		if (window.pageYOffset) {
			return window.pageYOffset
		}
		return Math.max(document.documentElement.scrollTop, document.body.scrollTop)
	}
 
	function E(e) {
		var t = m(e);
		return t >= w && t <= b + w
	}
 
	function S() {
		var e = document.createElement("audio");
		e.setAttribute("class", l);
		e.src = i;
		e.loop = false;
		e.addEventListener("canplay", function() {
			setTimeout(function() {
				x(k)
			}, 500);
			setTimeout(function() {
				N();
				p();
				for (var e = 0; e < O.length; e++) {
					T(O[e])
				}
			}, 15500)
		}, true);
		e.addEventListener("ended", function() {
			N();
			h()
		}, true);
		e.innerHTML = " <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";
		document.body.appendChild(e);
		e.play()
	}
 
	function x(e) {
		e.className += " " + s + " " + o
	}
 
	function T(e) {
		e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)]
	}
 
	function N() {
		var e = document.getElementsByClassName(s);
		var t = new RegExp("\\b" + s + "\\b");
		for (var n = 0; n < e.length; ) {
			e[n].className = e[n].className.replace(t, "")
		}
	}
 
	var e = 30;
	var t = 30;
	var n = 350;
	var r = 350;
	var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";
	var s = "mw-harlem_shake_me";
	var o = "im_first";
	var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"];
	var a = "mw-strobe_light";
	var f = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";
	var l = "mw_added_css";
	var b = g();
	var w = y();
	var C = document.getElementsByTagName("*");
	var k = null;
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			if (E(A)) {
				k = A;
				break
			}
		}
	}
	if (A === null) {
		console.warn("Could not find a node of the right size. Please try a different page.");
		return
	}
	c();
	S();
	var O = [];
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			O.push(A)
		}
	}
})()    '>High一下</a> </li>

  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-04-24T00:35:18.000Z"><a href="/2015/04/24/fio/">2015-04-24</a></time>
      
      
  
    <h1 class="title">fio</h1>
  

    </header>
    <div class="entry">
      
        <h1 id="How_to_install_fio">How to install fio</h1><ol>
<li>Clone fio from git://git.kernel.dk/fio.git</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># git clone git://git.kernel.dk/fio.git</span></span><br></pre></td></tr></table></figure>
<ol>
<li>Install it:</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd fio</span></span><br><span class="line"><span class="comment"># ./configure</span></span><br><span class="line"><span class="comment"># make</span></span><br><span class="line"><span class="comment"># make install</span></span><br></pre></td></tr></table></figure>
<h1 id="Features_and_Functions">Features and Functions</h1><p>fio is a tool that will spawn a number of threads or processes doing a particular type of io action as specified by the user. fio takes a number of global parameters, each inherited by the thread unless otherwise parameters given to them overriding that setting is given. The typical use of fio is to write a job file matching the io load one wants to simulate.</p>
<h1 id="How_fio_works">How fio works</h1><p>The first step in getting fio to simulate a desired io workload, is writing a job file describing that specific setup. A job file may contain any number of threads and/or files - the typical contents of the job file is a global section defining shared parameters, and one or more job sections describing the jobs involved. When run, fio parses this file and sets everything up as described. If we break down a job from top to bottom, it contains the following basic parameters:</p>
<ul>
<li><strong>IO type</strong> - Defines the io pattern issued to the file(s). We may only be reading sequentially from this file(s), or we may be writing randomly. Or even mixing reads and writes, sequentially or randomly.</li>
<li><strong>Block size</strong> - In how large chunks are we issuing io? This may be a single value, or it may describe a range of block sizes.</li>
<li><strong>IO size</strong> - How much data are we going to be reading/writing.</li>
<li><strong>IO engine</strong> - How do we issue io? We could be memory mapping the file, we could be using regular read/write, we could be using splice, async io, syslet, or even SG (SCSI generic sg).</li>
<li><strong>IO depth</strong> - If the io engine is async, how large a queuing depth do we want to maintain?</li>
<li><strong>IO type</strong> - Should we be doing buffered io, or direct/raw io?</li>
<li><strong>Num files</strong> - How many files are we spreading the workload over.</li>
<li><strong>Num threads</strong> - How many threads or processes should we spread this workload over.</li>
</ul>
<p>The above are the basic parameters defined for a workload, in addition there’s a multitude of parameters that modify other aspects of how this job behaves.</p>
<h1 id="Running_fio">Running fio</h1><p>See the README file for command line parameters, there are only a few of them.</p>
<p>Running fio is normally the easiest part - you just give it the job file (or job files) as parameters:</p>
<p><code>$ fio job_file</code></p>
<p>and it will start doing what the job_file tells it to do. You can give more than one job file on the command line, fio will serialize the running of those files. Internally that is the same as using the ‘stonewall’ parameter described in the parameter section.</p>
<p>If the job file contains only one job, you may as well just give the parameters on the command line. The command line parameters are identical to the job parameters, with a few extra that control global parameters (see README). For example, for the job file parameter iodepth=2, the mirror command line option would be —iodepth 2 or —iodepth=2. You can also use the command line for giving more than one job entry. For each —name option that fio sees, it will start a new job with that name. Command line entries following a —name entry will apply to that job, until there are no more entries or a new —name entry is seen. This is similar to the job file options, where each option applies to the current job until a new [] job entry is seen.</p>
<p>fio does not need to run as root, except if the files or devices specified in the job section requires that. Some other options may also be restricted, such as memory locking, io scheduler switching, and decreasing the nice value.</p>
<h1 id="Job_file">Job file</h1><p>As previously described, fio accepts one or more job files describing what it is supposed to do. The job file format is the classic ini file, where the names enclosed in [] brackets define the job name. You are free to use any ascii name you want, except ‘global’ which has special meaning. A global section sets defaults for the jobs described in that file. A job may override a global section parameter, and a job file may even have several global sections if so desired. A job is only affected by a global section residing above it. If the first character in a line is a ‘;’ or a ‘#’, the entire line is discarded as a comment.</p>
<p>So let’s look at a really simple job file that defines two processes, each randomly reading from a 128MB file.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">; -- start job file --</span><br><span class="line">[global]</span><br><span class="line">rw=randread</span><br><span class="line">size=<span class="number">128</span>m</span><br><span class="line"></span><br><span class="line">[job1]</span><br><span class="line"></span><br><span class="line">[job2]</span><br><span class="line"></span><br><span class="line">; -- end job file --</span><br></pre></td></tr></table></figure>
<p>As you can see, the job file sections themselves are empty as all the described parameters are shared. As no filename= option is given, fio makes up a filename for each of the jobs as it sees fit. On the command line, this job would look as follows:</p>
<p><code>$ fio --name=global --rw=randread --size=128m --name=job1 --name=job2</code></p>
<p>Let’s look at an example that has a number of processes writing randomly to files.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">; -- start job file --</span><br><span class="line">[random-writers]</span><br><span class="line">ioengine=libaio</span><br><span class="line">iodepth=<span class="number">4</span></span><br><span class="line">rw=randwrite</span><br><span class="line">bs=<span class="number">32</span>k</span><br><span class="line">direct=<span class="number">0</span></span><br><span class="line">size=<span class="number">64</span>m</span><br><span class="line">numjobs=<span class="number">4</span></span><br><span class="line">; -- end job file --</span><br></pre></td></tr></table></figure>
<p>Here we have no global section, as we only have one job defined anyway. We want to use async io here, with a depth of 4 for each file. We also increased the buffer size used to 32KB and define numjobs to 4 to fork 4 identical jobs. The result is 4 processes each randomly writing to their own 64MB file. Instead of using the above job file, you could have given the parameters on the command line. For this case, you would specify:</p>
<p><code>$ fio --name=random-writers --ioengine=libaio --iodepth=4 --rw=randwrite --bs=32k --direct=0 --size=64m --numjobs=4</code></p>
<p>When fio is utilized as a basis of any reasonably large test suite, it might be desirable to share a set of standardized settings across multiple job files. Instead of copy/pasting such settings, any section may pull in an external .fio file with ‘include filename’ directive, as in the following example:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">; -- start job file including.fio --</span><br><span class="line">[global]</span><br><span class="line">filename=/tmp/<span class="built_in">test</span></span><br><span class="line">filesize=<span class="number">1</span>m</span><br><span class="line">include glob-include.fio</span><br><span class="line"></span><br><span class="line">[<span class="built_in">test</span>]</span><br><span class="line">rw=randread</span><br><span class="line">bs=<span class="number">4</span>k</span><br><span class="line">time_based=<span class="number">1</span></span><br><span class="line">runtime=<span class="number">10</span></span><br><span class="line">include <span class="built_in">test</span>-include.fio</span><br><span class="line">; -- end job file including.fio --</span><br><span class="line"></span><br><span class="line">; -- start job file glob-include.fio --</span><br><span class="line">thread=<span class="number">1</span></span><br><span class="line">group_reporting=<span class="number">1</span></span><br><span class="line">; -- end job file glob-include.fio --</span><br><span class="line"></span><br><span class="line">; -- start job file <span class="built_in">test</span>-include.fio --</span><br><span class="line">ioengine=libaio</span><br><span class="line">iodepth=<span class="number">4</span></span><br><span class="line">; -- end job file <span class="built_in">test</span>-include.fio -</span><br></pre></td></tr></table></figure>
<p>Settings pulled into a section apply to that section only (except global section). Include directives may be nested in that any included file may contain further include directive(s). Include files may not contain [] sections.</p>
<p><strong>There are many parameters for job file, see fio/HOWTO(5.0 Detailed list of parameters) for details</strong></p>
<p><strong>Note:</strong><br>There are some template job files, see <strong>fio/examples</strong></p>
<h1 id="Client/server">Client/server</h1><p>Normally fio is invoked as a stand-alone application on the machine where the IO workload should be generated. However, the frontend and backend of fio can be run separately. Ie the fio server can generate an IO workload on the “Device Under Test” while being controlled from another machine.</p>
<p>Start the server on the machine which has access to the storage DUT:</p>
<p><code>fio --server=args</code></p>
<p>where args defines what fio listens to. The arguments are of the form ‘type,hostname or IP,port’. ‘type’ is either ‘ip’ (or ip4) for TCP/IP v4, ‘ip6’ for TCP/IP v6, or ‘sock’ for a local unix domain socket. ‘hostname’ is either a hostname or IP address, and ‘port’ is the port to listen to (only valid for TCP/IP, not a local socket). Some examples:</p>
<p>1) <code>fio --server</code></p>
<p>   Start a fio server, listening on all interfaces on the default port (8765).</p>
<p>2) <code>fio --server=ip:hostname,4444</code></p>
<p>   Start a fio server, listening on IP belonging to hostname and on port 4444.</p>
<p>3) <code>fio --server=ip6:::1,4444</code></p>
<p>   Start a fio server, listening on IPv6 localhost ::1 and on port 4444.</p>
<p>4) <code>fio --server=,4444</code></p>
<p>   Start a fio server, listening on all interfaces on port 4444.</p>
<p>5) <code>fio --server=1.2.3.4</code></p>
<p>   Start a fio server, listening on IP 1.2.3.4 on the default port.</p>
<p>6) <code>fio --server=sock:/tmp/fio.sock</code></p>
<p>   Start a fio server, listening on the local socket /tmp/fio.sock.</p>
<p>Once a server is running, a “client” can connect to the fio server with:</p>
<p><code>fio --local-args --client=&lt;server&gt; --remote-args &lt;job file(s)&gt;</code></p>
<p>where —local-args are arguments for the client where it is running, ‘server’ is the connect string, and —remote-args and <job file(s)=""> are sent to the server. The ‘server’ string follows the same format as it does on the server side, to allow IP/hostname/socket and port strings.</job></p>
<p>Fio can connect to multiple servers this way:</p>
<p>fio —client=<server1> <job file(s)=""> —client=<server2> <job file(s)=""></job></server2></job></server1></p>
<p>If the job file is located on the fio server, then you can tell the server to load a local file as well. This is done by using —remote-config:</p>
<p><code>fio --client=server --remote-config /path/to/file.fio</code></p>
<p>Then the fio server will open this local (to the server) job file instead of being passed one from the client.</p>
<h1 id="Xen_fio_job_file">Xen fio job file</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">ioengine=libaio</span><br><span class="line">size=<span class="number">190</span>M</span><br><span class="line">direct=<span class="number">1</span></span><br><span class="line">runtime=<span class="number">7200</span></span><br><span class="line">time_based</span><br><span class="line">directory=/mnt</span><br><span class="line">group_reporting</span><br><span class="line">numjobs=<span class="number">16</span></span><br><span class="line">filename=xen_block.file</span><br><span class="line">write_bw_<span class="built_in">log</span>=xen</span><br><span class="line">write_lat_<span class="built_in">log</span>=xen</span><br><span class="line">write_iops_<span class="built_in">log</span>=xen</span><br><span class="line"></span><br><span class="line">[randread-<span class="number">4</span>k-iodepth_1]</span><br><span class="line">rw=<span class="built_in">read</span></span><br><span class="line">bs=<span class="number">4</span>k</span><br><span class="line">iodepth=<span class="number">1</span></span><br><span class="line">stonewall</span><br><span class="line"></span><br><span class="line">[randwrite-<span class="number">4</span>k-iodepth_1]</span><br><span class="line">rw=randread</span><br><span class="line">bs=<span class="number">4</span>k</span><br><span class="line">iodepth=<span class="number">1</span></span><br><span class="line">stonewall</span><br><span class="line"></span><br><span class="line">[randrw-<span class="number">4</span>k-iodepth_1]</span><br><span class="line">rw=randrw</span><br><span class="line">bs=<span class="number">4</span>k</span><br><span class="line">iodepth=<span class="number">1</span></span><br><span class="line">stonewall</span><br><span class="line"></span><br><span class="line">[randread-<span class="number">256</span>k-iodepth_64]</span><br><span class="line">rw=<span class="built_in">read</span></span><br><span class="line">bs=<span class="number">256</span>k</span><br><span class="line">iodepth=<span class="number">64</span></span><br><span class="line">stonewall</span><br><span class="line"></span><br><span class="line">[randwrite-<span class="number">256</span>k-iodepth_64]</span><br><span class="line">rw=randread</span><br><span class="line">bs=<span class="number">256</span>k</span><br><span class="line">iodepth=<span class="number">64</span></span><br><span class="line">stonewall</span><br><span class="line"></span><br><span class="line">[randrw-<span class="number">256</span>k-iodepth_64]</span><br><span class="line">rw=randrw</span><br><span class="line">bs=<span class="number">256</span>k</span><br><span class="line">iodepth=<span class="number">64</span></span><br><span class="line">stonewall</span><br></pre></td></tr></table></figure>
<p>If you want to run this job, just issue:</p>
<p><code># fio $xen_job_file</code></p>
<h1 id="Results_analysis">Results analysis</h1><p>Issue <code># fio $xen_job_file --output=xen_fio_results.txt</code></p>
<p><code># cat xen_fio_results.txt</code>The results will be something like:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">randread-<span class="number">4</span>k-iodepth_1: (g=<span class="number">0</span>): rw=<span class="built_in">read</span>, bs=<span class="number">4</span>K-<span class="number">4</span>K/<span class="number">4</span>K-<span class="number">4</span>K/<span class="number">4</span>K-<span class="number">4</span>K, ioengine=libaio, iodepth=<span class="number">1</span></span><br><span class="line">...</span><br><span class="line">randwrite-<span class="number">4</span>k-iodepth_1: (g=<span class="number">1</span>): rw=randread, bs=<span class="number">4</span>K-<span class="number">4</span>K/<span class="number">4</span>K-<span class="number">4</span>K/<span class="number">4</span>K-<span class="number">4</span>K, ioengine=libaio, iodepth=<span class="number">1</span></span><br><span class="line">...</span><br><span class="line">randrw-<span class="number">4</span>k-iodepth_1: (g=<span class="number">2</span>): rw=randrw, bs=<span class="number">4</span>K-<span class="number">4</span>K/<span class="number">4</span>K-<span class="number">4</span>K/<span class="number">4</span>K-<span class="number">4</span>K, ioengine=libaio, iodepth=<span class="number">1</span></span><br><span class="line">...</span><br><span class="line">randread-<span class="number">256</span>k-iodepth_64: (g=<span class="number">3</span>): rw=<span class="built_in">read</span>, bs=<span class="number">256</span>K-<span class="number">256</span>K/<span class="number">256</span>K-<span class="number">256</span>K/<span class="number">256</span>K-<span class="number">256</span>K, ioengine=libaio, iodepth=<span class="number">64</span></span><br><span class="line">...</span><br><span class="line">randwrite-<span class="number">256</span>k-iodepth_64: (g=<span class="number">4</span>): rw=randread, bs=<span class="number">256</span>K-<span class="number">256</span>K/<span class="number">256</span>K-<span class="number">256</span>K/<span class="number">256</span>K-<span class="number">256</span>K, ioengine=libaio, iodepth=<span class="number">64</span></span><br><span class="line">...</span><br><span class="line">randrw-<span class="number">256</span>k-iodepth_64: (g=<span class="number">5</span>): rw=randrw, bs=<span class="number">256</span>K-<span class="number">256</span>K/<span class="number">256</span>K-<span class="number">256</span>K/<span class="number">256</span>K-<span class="number">256</span>K, ioengine=libaio, iodepth=<span class="number">64</span></span><br><span class="line">...</span><br><span class="line">fio-<span class="number">2.1</span>.<span class="number">7</span></span><br><span class="line">Starting <span class="number">12</span> processes</span><br><span class="line"></span><br><span class="line">randread-<span class="number">4</span>k-iodepth_1: (groupid=<span class="number">0</span>, <span class="built_in">jobs</span>=<span class="number">2</span>): err= <span class="number">0</span>: pid=<span class="number">19833</span>: Tue Apr <span class="number">21</span> <span class="number">21</span>:<span class="number">37</span>:<span class="number">14</span> <span class="number">2015</span></span><br><span class="line">  <span class="built_in">read</span> : io=<span class="number">4768.1</span>MB, bw=<span class="number">67824</span>KB/s, iops=<span class="number">16955</span>, runt= <span class="number">72001</span>msec</span><br><span class="line">    slat (usec): min=<span class="number">6</span>, max=<span class="number">2097</span>, avg=<span class="number">13.71</span>, stdev= <span class="number">4.32</span></span><br><span class="line">    clat (usec): min=<span class="number">1</span>, max=<span class="number">5581</span>, avg=<span class="number">100.62</span>, stdev=<span class="number">18.40</span></span><br><span class="line">     lat (usec): min=<span class="number">44</span>, max=<span class="number">5593</span>, avg=<span class="number">114.64</span>, stdev=<span class="number">19.03</span></span><br><span class="line">    clat percentiles (usec):</span><br><span class="line">     |  <span class="number">1.00</span>th=[   <span class="number">66</span>],  <span class="number">5.00</span>th=[   <span class="number">88</span>], <span class="number">10.00</span>th=[   <span class="number">90</span>], <span class="number">20.00</span>th=[   <span class="number">93</span>],</span><br><span class="line">     | <span class="number">30.00</span>th=[   <span class="number">95</span>], <span class="number">40.00</span>th=[   <span class="number">97</span>], <span class="number">50.00</span>th=[   <span class="number">98</span>], <span class="number">60.00</span>th=[  <span class="number">100</span>],</span><br><span class="line">     | <span class="number">70.00</span>th=[  <span class="number">102</span>], <span class="number">80.00</span>th=[  <span class="number">106</span>], <span class="number">90.00</span>th=[  <span class="number">114</span>], <span class="number">95.00</span>th=[  <span class="number">126</span>],</span><br><span class="line">     | <span class="number">99.00</span>th=[  <span class="number">155</span>], <span class="number">99.50</span>th=[  <span class="number">167</span>], <span class="number">99.90</span>th=[  <span class="number">217</span>], <span class="number">99.95</span>th=[  <span class="number">253</span>],</span><br><span class="line">     | <span class="number">99.99</span>th=[  <span class="number">358</span>]</span><br><span class="line">    bw (KB  /s): min=<span class="number">30824</span>, max=<span class="number">37912</span>, per=<span class="number">49.97</span>%, avg=<span class="number">33893.51</span>, stdev=<span class="number">1242.74</span></span><br><span class="line">    lat (usec) : <span class="number">2</span>=<span class="number">0.02</span>%, <span class="number">4</span>=<span class="number">0.03</span>%, <span class="number">10</span>=<span class="number">0.01</span>%, <span class="number">50</span>=<span class="number">0.02</span>%, <span class="number">100</span>=<span class="number">58.24</span>%</span><br><span class="line">    lat (usec) : <span class="number">250</span>=<span class="number">41.64</span>%, <span class="number">500</span>=<span class="number">0.05</span>%, <span class="number">750</span>=<span class="number">0.01</span>%, <span class="number">1000</span>=<span class="number">0.01</span>%</span><br><span class="line">    lat (msec) : <span class="number">2</span>=<span class="number">0.01</span>%, <span class="number">4</span>=<span class="number">0.01</span>%, <span class="number">10</span>=<span class="number">0.01</span>%</span><br><span class="line">  cpu          : usr=<span class="number">8.43</span>%, sys=<span class="number">24.57</span>%, ctx=<span class="number">1220128</span>, majf=<span class="number">0</span>, minf=<span class="number">65</span></span><br><span class="line">  IO depths    : <span class="number">1</span>=<span class="number">100.0</span>%, <span class="number">2</span>=<span class="number">0.0</span>%, <span class="number">4</span>=<span class="number">0.0</span>%, <span class="number">8</span>=<span class="number">0.0</span>%, <span class="number">16</span>=<span class="number">0.0</span>%, <span class="number">32</span>=<span class="number">0.0</span>%, &gt;=<span class="number">64</span>=<span class="number">0.0</span>%</span><br><span class="line">     submit    : <span class="number">0</span>=<span class="number">0.0</span>%, <span class="number">4</span>=<span class="number">100.0</span>%, <span class="number">8</span>=<span class="number">0.0</span>%, <span class="number">16</span>=<span class="number">0.0</span>%, <span class="number">32</span>=<span class="number">0.0</span>%, <span class="number">64</span>=<span class="number">0.0</span>%, &gt;=<span class="number">64</span>=<span class="number">0.0</span>%</span><br><span class="line">     complete  : <span class="number">0</span>=<span class="number">0.0</span>%, <span class="number">4</span>=<span class="number">100.0</span>%, <span class="number">8</span>=<span class="number">0.0</span>%, <span class="number">16</span>=<span class="number">0.0</span>%, <span class="number">32</span>=<span class="number">0.0</span>%, <span class="number">64</span>=<span class="number">0.0</span>%, &gt;=<span class="number">64</span>=<span class="number">0.0</span>%</span><br><span class="line">     issued    : total=r=<span class="number">1220840</span>/w=<span class="number">0</span>/d=<span class="number">0</span>, short=r=<span class="number">0</span>/w=<span class="number">0</span>/d=<span class="number">0</span></span><br><span class="line">     latency   : target=<span class="number">0</span>, window=<span class="number">0</span>, percentile=<span class="number">100.00</span>%, depth=<span class="number">1</span></span><br><span class="line">     ......</span><br><span class="line">     ......</span><br><span class="line">     ......</span><br><span class="line">randrw-<span class="number">256</span>k-iodepth_64: (groupid=<span class="number">5</span>, <span class="built_in">jobs</span>=<span class="number">2</span>): err= <span class="number">0</span>: pid=<span class="number">19850</span>: Tue Apr <span class="number">21</span> <span class="number">21</span>:<span class="number">37</span>:<span class="number">14</span> <span class="number">2015</span></span><br><span class="line">  <span class="built_in">read</span> : io=<span class="number">30666</span>MB, bw=<span class="number">436078</span>KB/s, iops=<span class="number">1703</span>, runt= <span class="number">72010</span>msec</span><br><span class="line">    slat (usec): min=<span class="number">29</span>, max=<span class="number">1577.6</span>K, avg=<span class="number">596.93</span>, stdev=<span class="number">13016.56</span></span><br><span class="line">    clat (msec): min=<span class="number">3</span>, max=<span class="number">1612</span>, avg=<span class="number">34.20</span>, stdev=<span class="number">96.81</span></span><br><span class="line">     lat (msec): min=<span class="number">3</span>, max=<span class="number">1612</span>, avg=<span class="number">34.80</span>, stdev=<span class="number">97.77</span></span><br><span class="line">    clat percentiles (msec):</span><br><span class="line">     |  <span class="number">1.00</span>th=[   <span class="number">11</span>],  <span class="number">5.00</span>th=[   <span class="number">15</span>], <span class="number">10.00</span>th=[   <span class="number">16</span>], <span class="number">20.00</span>th=[   <span class="number">18</span>],</span><br><span class="line">     | <span class="number">30.00</span>th=[   <span class="number">20</span>], <span class="number">40.00</span>th=[   <span class="number">21</span>], <span class="number">50.00</span>th=[   <span class="number">23</span>], <span class="number">60.00</span>th=[   <span class="number">25</span>],</span><br><span class="line">     | <span class="number">70.00</span>th=[   <span class="number">28</span>], <span class="number">80.00</span>th=[   <span class="number">31</span>], <span class="number">90.00</span>th=[   <span class="number">37</span>], <span class="number">95.00</span>th=[   <span class="number">41</span>],</span><br><span class="line">     | <span class="number">99.00</span>th=[  <span class="number">474</span>], <span class="number">99.50</span>th=[  <span class="number">824</span>], <span class="number">99.90</span>th=[ <span class="number">1467</span>], <span class="number">99.95</span>th=[ <span class="number">1598</span>],</span><br><span class="line">     | <span class="number">99.99</span>th=[ <span class="number">1614</span>]</span><br><span class="line">    bw (KB  /s): min=  <span class="number">378</span>, max=<span class="number">191247</span>, per=<span class="number">12.54</span>%, avg=<span class="number">54676.03</span>, stdev=<span class="number">47675.86</span></span><br><span class="line">  write: io=<span class="number">26461</span>MB, bw=<span class="number">376286</span>KB/s, iops=<span class="number">1469</span>, runt= <span class="number">72010</span>msec</span><br><span class="line">    slat (usec): min=<span class="number">39</span>, max=<span class="number">1577.6</span>K, avg=<span class="number">615.76</span>, stdev=<span class="number">11338.38</span></span><br><span class="line">    clat (msec): min=<span class="number">3</span>, max=<span class="number">1625</span>, avg=<span class="number">43.17</span>, stdev=<span class="number">107.59</span></span><br><span class="line">     lat (msec): min=<span class="number">3</span>, max=<span class="number">1626</span>, avg=<span class="number">43.78</span>, stdev=<span class="number">108.31</span></span><br><span class="line">    clat percentiles (msec):</span><br><span class="line">     |  <span class="number">1.00</span>th=[   <span class="number">12</span>],  <span class="number">5.00</span>th=[   <span class="number">18</span>], <span class="number">10.00</span>th=[   <span class="number">20</span>], <span class="number">20.00</span>th=[   <span class="number">23</span>],</span><br><span class="line">     | <span class="number">30.00</span>th=[   <span class="number">25</span>], <span class="number">40.00</span>th=[   <span class="number">28</span>], <span class="number">50.00</span>th=[   <span class="number">30</span>], <span class="number">60.00</span>th=[   <span class="number">33</span>],</span><br><span class="line">     | <span class="number">70.00</span>th=[   <span class="number">36</span>], <span class="number">80.00</span>th=[   <span class="number">40</span>], <span class="number">90.00</span>th=[   <span class="number">46</span>], <span class="number">95.00</span>th=[   <span class="number">51</span>],</span><br><span class="line">     | <span class="number">99.00</span>th=[  <span class="number">578</span>], <span class="number">99.50</span>th=[  <span class="number">938</span>], <span class="number">99.90</span>th=[ <span class="number">1483</span>], <span class="number">99.95</span>th=[ <span class="number">1598</span>],</span><br><span class="line">     | <span class="number">99.99</span>th=[ <span class="number">1614</span>]</span><br><span class="line">    bw (KB  /s): min= <span class="number">2509</span>, max=<span class="number">159744</span>, per=<span class="number">13.09</span>%, avg=<span class="number">49253.29</span>, stdev=<span class="number">39566.46</span></span><br><span class="line">    lat (msec) : <span class="number">4</span>=<span class="number">0.01</span>%, <span class="number">10</span>=<span class="number">0.58</span>%, <span class="number">20</span>=<span class="number">23.55</span>%, <span class="number">50</span>=<span class="number">72.10</span>%, <span class="number">100</span>=<span class="number">2.23</span>%</span><br><span class="line">    lat (msec) : <span class="number">250</span>=<span class="number">0.06</span>%, <span class="number">500</span>=<span class="number">0.42</span>%, <span class="number">750</span>=<span class="number">0.41</span>%, <span class="number">1000</span>=<span class="number">0.27</span>%, <span class="number">2000</span>=<span class="number">0.38</span>%</span><br><span class="line">  cpu          : usr=<span class="number">3.89</span>%, sys=<span class="number">31.56</span>%, ctx=<span class="number">99711</span>, majf=<span class="number">0</span>, minf=<span class="number">52</span></span><br><span class="line">  IO depths    : <span class="number">1</span>=<span class="number">0.1</span>%, <span class="number">2</span>=<span class="number">0.3</span>%, <span class="number">4</span>=<span class="number">0.5</span>%, <span class="number">8</span>=<span class="number">1.1</span>%, <span class="number">16</span>=<span class="number">2.1</span>%, <span class="number">32</span>=<span class="number">4.2</span>%, &gt;=<span class="number">64</span>=<span class="number">91.7</span>%</span><br><span class="line">     submit    : <span class="number">0</span>=<span class="number">0.0</span>%, <span class="number">4</span>=<span class="number">100.0</span>%, <span class="number">8</span>=<span class="number">0.0</span>%, <span class="number">16</span>=<span class="number">0.0</span>%, <span class="number">32</span>=<span class="number">0.0</span>%, <span class="number">64</span>=<span class="number">0.0</span>%, &gt;=<span class="number">64</span>=<span class="number">0.0</span>%</span><br><span class="line">     complete  : <span class="number">0</span>=<span class="number">0.0</span>%, <span class="number">4</span>=<span class="number">99.9</span>%, <span class="number">8</span>=<span class="number">0.0</span>%, <span class="number">16</span>=<span class="number">0.0</span>%, <span class="number">32</span>=<span class="number">0.0</span>%, <span class="number">64</span>=<span class="number">0.1</span>%, &gt;=<span class="number">64</span>=<span class="number">0.0</span>%</span><br><span class="line">     issued    : total=r=<span class="number">122664</span>/w=<span class="number">105845</span>/d=<span class="number">0</span>, short=r=<span class="number">0</span>/w=<span class="number">0</span>/d=<span class="number">0</span></span><br><span class="line">     latency   : target=<span class="number">0</span>, window=<span class="number">0</span>, percentile=<span class="number">100.00</span>%, depth=<span class="number">64</span></span><br><span class="line"></span><br><span class="line">Run status group <span class="number">0</span> (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: io=<span class="number">4768.1</span>MB, aggrb=<span class="number">67823</span>KB/s, minb=<span class="number">67823</span>KB/s, maxb=<span class="number">67823</span>KB/s, mint=<span class="number">72001</span>msec, maxt=<span class="number">72001</span>msec</span><br><span class="line"></span><br><span class="line">Run status group <span class="number">1</span> (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: io=<span class="number">4720.6</span>MB, aggrb=<span class="number">67135</span>KB/s, minb=<span class="number">67135</span>KB/s, maxb=<span class="number">67135</span>KB/s, mint=<span class="number">72001</span>msec, maxt=<span class="number">72001</span>msec</span><br><span class="line"></span><br><span class="line">Run status group <span class="number">2</span> (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: io=<span class="number">355724</span>KB, aggrb=<span class="number">4924</span>KB/s, minb=<span class="number">4924</span>KB/s, maxb=<span class="number">4924</span>KB/s, mint=<span class="number">72237</span>msec, maxt=<span class="number">72237</span>msec</span><br><span class="line">  WRITE: io=<span class="number">355916</span>KB, aggrb=<span class="number">4927</span>KB/s, minb=<span class="number">4927</span>KB/s, maxb=<span class="number">4927</span>KB/s, mint=<span class="number">72237</span>msec, maxt=<span class="number">72237</span>msec</span><br><span class="line"></span><br><span class="line">Run status group <span class="number">3</span> (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: io=<span class="number">104547</span>MB, aggrb=<span class="number">1452.3</span>MB/s, minb=<span class="number">1452.3</span>MB/s, maxb=<span class="number">1452.3</span>MB/s, mint=<span class="number">72001</span>msec, maxt=<span class="number">72001</span>msec</span><br><span class="line"></span><br><span class="line">Run status group <span class="number">4</span> (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: io=<span class="number">107474</span>MB, aggrb=<span class="number">1492.7</span>MB/s, minb=<span class="number">1492.7</span>MB/s, maxb=<span class="number">1492.7</span>MB/s, mint=<span class="number">72001</span>msec, maxt=<span class="number">72001</span>msec</span><br><span class="line"></span><br><span class="line">Run status group <span class="number">5</span> (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: io=<span class="number">30666</span>MB, aggrb=<span class="number">436078</span>KB/s, minb=<span class="number">436078</span>KB/s, maxb=<span class="number">436078</span>KB/s, mint=<span class="number">72010</span>msec, maxt=<span class="number">72010</span>msec</span><br><span class="line">  WRITE: io=<span class="number">26461</span>MB, aggrb=<span class="number">376285</span>KB/s, minb=<span class="number">376285</span>KB/s, maxb=<span class="number">376285</span>KB/s, mint=<span class="number">72010</span>msec, maxt=<span class="number">72010</span>msec</span><br><span class="line"></span><br><span class="line">Disk stats (<span class="built_in">read</span>/write):</span><br><span class="line">  xvdb: ios=<span class="number">8341258</span>/<span class="number">722656</span>, merge=<span class="number">0</span>/<span class="number">29</span>, ticks=<span class="number">11020547</span>/<span class="number">7441881</span>, <span class="keyword">in</span>_queue=<span class="number">18466369</span>, util=<span class="number">76.14</span>%</span><br></pre></td></tr></table></figure>
<p>The client number is printed, along with the group id and error of that thread. Below is the io statistics, here for writes. In the order listed, they denote:</p>
<ul>
<li><strong>io=</strong> - Number of megabytes io performed</li>
<li><strong>bw=</strong> - Average bandwidth rate</li>
<li><strong>iops=</strong> - Average IOs performed per second</li>
<li><strong>runt=</strong> - The runtime of that thread</li>
<li><strong>slat=</strong> - Submission latency (avg being the average, stdev being the standard deviation). This is the time it took to submit the io. For sync io, the slat is really the completion latency, since queue/complete is one operation there. This value can be in milliseconds or microseconds, fio will choose the most appropriate base and print that. In the example above, milliseconds is the best scale. Note: in —minimal mode latencies are always expressed in microseconds.</li>
<li><strong>clat=</strong> - Completion latency. Same names as slat, this denotes the time from submission to completion of the io pieces. For sync io, clat will usually be equal (or very close) to 0, as the time from submit to complete is basically just CPU time (io has already been done, see slat explanation).</li>
<li><strong>cpu=</strong> - CPU usage. User and system time, along with the number of context switches this thread went through, usage of system and user time, and finally the number of major and minor page faults.</li>
</ul>
<p>After each client has been listed, the group statistics are printed. They will look like this:</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Run status group <span class="number">5</span> (all jobs):</span><br><span class="line">   READ: <span class="variable">io=</span><span class="number">30666</span>MB, <span class="variable">aggrb=</span><span class="number">436078</span>KB/s, <span class="variable">minb=</span><span class="number">436078</span>KB/s, <span class="variable">maxb=</span><span class="number">436078</span>KB/s, <span class="variable">mint=</span><span class="number">72010</span>msec, <span class="variable">maxt=</span><span class="number">72010</span>msec</span><br><span class="line">  WRITE: <span class="variable">io=</span><span class="number">26461</span>MB, <span class="variable">aggrb=</span><span class="number">376285</span>KB/s, <span class="variable">minb=</span><span class="number">376285</span>KB/s, <span class="variable">maxb=</span><span class="number">376285</span>KB/s, <span class="variable">mint=</span><span class="number">72010</span>msec, <span class="variable">maxt=</span><span class="number">72010</span>msec</span><br></pre></td></tr></table></figure>
<p>For each data direction, it prints:</p>
<ul>
<li><strong>io=</strong> - Number of megabytes io performed.</li>
<li><strong>aggrb=</strong> - Aggregate bandwidth of threads in this group.</li>
<li><strong>minb=</strong> - The minimum average bandwidth a thread saw.</li>
<li><strong>maxb=</strong> - The maximum average bandwidth a thread saw.</li>
<li><strong>mint=</strong> - The smallest runtime of the threads in that group.</li>
<li><strong>maxt=</strong> - The longest runtime of the threads in that group.</li>
</ul>
<p>And finally, the disk statistics are printed. They will look like this:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Disk stats (<span class="built_in">read</span>/write):</span><br><span class="line">  sda: ios=<span class="number">16398</span>/<span class="number">16511</span>, merge=<span class="number">30</span>/<span class="number">162</span>, ticks=<span class="number">6853</span>/<span class="number">819634</span>, <span class="keyword">in</span>_queue=<span class="number">826487</span>, util=<span class="number">100.00</span>%</span><br></pre></td></tr></table></figure></p>
<p>Each value is printed for both reads and writes, with reads first. The numbers denote:</p>
<ul>
<li><strong>ios=</strong> - Number of ios performed by all groups.</li>
<li><strong>merge=</strong> - Number of merges io the io scheduler.</li>
<li><strong>ticks=</strong> - Number of ticks we kept the disk busy.</li>
<li><strong>io_queue=</strong> - Total time spent in the disk queue.</li>
<li><strong>util=</strong> - The disk utilization. A value of 100% means we kept the disk busy constantly, 50% would be a disk idling half of the time.</li>
</ul>
<p>It is also possible to get fio to dump the current output while it is running, without terminating the job. To do that, send fio the USR1 signal. You can also get regularly timed dumps by using the —status-interval parameter, or by creating a file in /tmp named fio-dump-status. If fio sees this file, it will unlink it and dump the current output status.</p>
<p>The performance indicators i use for xen are <strong>bw</strong>, <strong>iops</strong> and <strong>slat/clat/lat</strong>. <strong>bw</strong>, <strong>iops</strong> the larger the better. <strong>slat/clat/lat</strong> the smaller the better.</p>
<p>For xen performance testing, i also add write_bw_log=xen, write_lat_log=xen, write_iops_log=xen in the fio job file to generate xen_bw.log, xen_iops.log, xen_clat.log, xen_slat.log, xen_lat.log. You can use fio/tools/fio_generate_plots to generate svg format picture:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./fio_generate_plots xen</span><br></pre></td></tr></table></figure></p>
<p><strong>Note:</strong> fio_generate_plots only take one argument, which is the prefix(xen) of xen_bw.log, xen_clat.log, xen_iops.log, xen_lat.log, xen_slat.log.</p>
<p>For more details, see fio/HOWTO(6.0 Interpreting the output) section.</p>
<h1 id="Terse_output">Terse output</h1><p>For scripted usage where you typically want to generate tables or graphs of the results, fio can output the results in a semicolon separated format. The format is one long line of values, such as:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2;<span class="tag">card0</span>;0;0;7139336;121836;60004;1;10109;27<span class="class">.932460</span>;116<span class="class">.933948</span>;220;126861;3495<span class="class">.446807</span>;1085<span class="class">.368601</span>;226;126864;3523<span class="class">.635629</span>;1089<span class="class">.012448</span>;24063;99944;50<span class="class">.275485</span>%;59818<span class="class">.274627</span>;5540<span class="class">.657370</span>;7155060;122104;60004;1;8338;29<span class="class">.086342</span>;117<span class="class">.839068</span>;388;128077;5032<span class="class">.488518</span>;1234<span class="class">.785715</span>;391;128085;5061<span class="class">.839412</span>;1236<span class="class">.909129</span>;23436;100928;50<span class="class">.287926</span>%;59964<span class="class">.832030</span>;5644<span class="class">.844189</span>;14<span class="class">.595833</span>%;19<span class="class">.394167</span>%;123706;0;7313;0<span class="class">.1</span>%;0<span class="class">.1</span>%;0<span class="class">.1</span>%;0<span class="class">.1</span>%;0<span class="class">.1</span>%;0<span class="class">.1</span>%;100<span class="class">.0</span>%;0<span class="class">.00</span>%;0<span class="class">.00</span>%;0<span class="class">.00</span>%;0<span class="class">.00</span>%;0<span class="class">.00</span>%;0<span class="class">.00</span>%;0<span class="class">.01</span>%;0<span class="class">.02</span>%;0<span class="class">.05</span>%;0<span class="class">.16</span>%;6<span class="class">.04</span>%;40<span class="class">.40</span>%;52<span class="class">.68</span>%;0<span class="class">.64</span>%;0<span class="class">.01</span>%;0<span class="class">.00</span>%;0<span class="class">.01</span>%;0<span class="class">.00</span>%;0<span class="class">.00</span>%;0<span class="class">.00</span>%;0<span class="class">.00</span>%;0<span class="class">.00</span>%</span><br><span class="line"><span class="tag">A</span> <span class="tag">description</span> <span class="tag">of</span> <span class="tag">this</span> <span class="tag">job</span> <span class="tag">goes</span> <span class="tag">here</span>.</span><br></pre></td></tr></table></figure></p>
<p>To enable terse output, use the —minimal command line option. The first value is the version of the terse output format. If the output has to be changed for some reason, this number will be incremented by 1 to signify that change.</p>
<p>For more details, see fio/HOWTO(7.0 Terse output) section.</p>
<h1 id="The_main_parameters_for_fio_command_line">The main parameters for fio command line</h1><ul>
<li><strong>—showcmd</strong> - Turn a job file into command line options</li>
<li><strong>—output</strong> - Write output to file</li>
<li><strong>—bandwidth-log</strong> - Generate per-job bandwidth logs</li>
<li><strong>—minimal</strong> - Minimal (terse) output</li>
<li><strong>—output-format=type</strong> - Output format (terse,json,normal)</li>
<li><strong>—enghelp=engine</strong> - Print ioengine help, or list available ioengines</li>
<li><strong>—enghelp=engine,cmd</strong> - Print help for an ioengine cmd</li>
<li><strong>—server=args</strong> - Start backend server. See Client/Server section.</li>
<li><strong>—client=host</strong> - Connect to specified backend.</li>
</ul>
<h1 id="Reference">Reference</h1><ul>
<li><a href="www.bluestop.org/qtxt">fio HOWTO</a></li>
<li>For more details, please read fio/README and fio/HOWTO</li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/Technology/">Technology</a>
  </div>

        
<!-- Baidu Button BEGIN -->
<div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare">
<a class="bds_qzone"></a>
<a class="bds_tsina"></a>
<a class="bds_tqq"></a>
<a class="bds_renren"></a>
<a class="bds_t163"></a>
<span class="bds_more"></span>
<a class="shareCount"></a>
</div>
<script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=3326447" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
</script>
<!-- Baidu Button END -->      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">

<nav id="pagination" >
    
    <a href="/2015/06/12/Python学习笔记/" class="alignleft prev" >上一页</a>
    
    
    <a href="/2015/04/24/dd/" class="alignright next" >下一页</a>
    
    <div class="clearfix"></div>
</nav>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"孔令飞"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->  
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:konglf.github.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Technology/Emacs/">Emacs</a><small>1</small></li>
  
    <li><a href="/categories/Technology/Keys/">Keys</a><small>2</small></li>
  
    <li><a href="/categories/Technology/Lex/">Lex</a><small>2</small></li>
  
    <li><a href="/categories/Technology/Linux/">Linux</a><small>1</small></li>
  
    <li><a href="/categories/essay/Linux/">Linux</a><small>1</small></li>
  
    <li><a href="/categories/Technology/Python/">Python</a><small>2</small></li>
  
    <li><a href="/categories/Technology/Shell/">Shell</a><small>1</small></li>
  
    <li><a href="/categories/Technology/">Technology</a><small>30</small></li>
  
    <li><a href="/categories/Technology/Xen/Virtualization/">Virtualization</a><small>1</small></li>
  
    <li><a href="/categories/Technology/Xen/">Xen</a><small>1</small></li>
  
    <li><a href="/categories/essay/">essay</a><small>3</small></li>
  
  </ul>
</div>


  <div class="widget tag">
<h3 class="title">简介</h3>
<ul class="entry">
<li>中文名：孔令飞</li>
<li>英文名：Alex</li>
<li>现状：Lenovo从事存储性能优化</li>
<li>QQ号：466701708</li>
<li>想要交友的朋友请<a href="http://kongll.github.io/about">联系我</a>！</li>
<li>我的<a href="http://blog.csdn.net/lnxfei">CSDN</a>博客</li>
<li><a href="http://chenghongjie1.sinaapp.com/">I Love You!</a></li>
</ul>
</div>


  <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3768665395&verifier=bc944b64&dpc=1"></iframe>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/Xen/" style="font-size: 10px;">Xen</a> <a href="/tags/emacs/" style="font-size: 20px;">emacs</a> <a href="/tags/博客技巧/" style="font-size: 10px;">博客技巧</a>
  </div>
</div>


  <div class="widget tag">
<h3 class="title">��������</h3>
<ul class="entry">
<li><a href="http://zipperary.com/" title="Zippera's Blog">Zippera</a></li>
</ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Lingfei Kong
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>


<a href="https://github.com/alex8866"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/82b228a3648bf44fc1163ef44c62fcc60081495e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png"></a>
