

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Performance Testing | Lingfei&#39;s Blog</title>
  <meta name="author" content="Lingfei Kong">
  
  <meta name="description" content="读书笔记，资料整理">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Performance Testing"/>
  <meta property="og:site_name" content="Lingfei&#39;s Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="http://kongll.github.io/atom.xml" title="Lingfei&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ffe3814b5f53cc394a493cbeb2368f2af' type='text/javascript'%3E%3C/script%3E"));
</script>



</head>


<body>
  <header id="header" class="inner">
<div class="alignleft">
  <h1><a href="/">Lingfei&#39;s Blog</a></h1>
  <h2><a href="/">我要扼住命运的咽喉，决不能让命运使我屈服</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/categories/Technology">技术</a></li>
    
      <li><a href="/categories/essay">随笔</a></li>
    
      <li><a href="/archives">归档</a></li>
    
      <li><a href="/about">关于</a></li>
    
	<li> <a href="/atom.xml">RSS</a> </li>
<li> <a title="把这个链接拖到你的Chrome收藏夹工具栏中" href='javascript:(function() {
	function c() {
		var e = document.createElement("link");
		e.setAttribute("type", "text/css");
		e.setAttribute("rel", "stylesheet");
		e.setAttribute("href", f);
		e.setAttribute("class", l);
		document.body.appendChild(e)
	}
 
	function h() {
		var e = document.getElementsByClassName(l);
		for (var t = 0; t < e.length; t++) {
			document.body.removeChild(e[t])
		}
	}
 
	function p() {
		var e = document.createElement("div");
		e.setAttribute("class", a);
		document.body.appendChild(e);
		setTimeout(function() {
			document.body.removeChild(e)
		}, 100)
	}
 
	function d(e) {
		return {
			height : e.offsetHeight,
			width : e.offsetWidth
		}
	}
 
	function v(i) {
		var s = d(i);
		return s.height > e && s.height < n && s.width > t && s.width < r
	}
 
	function m(e) {
		var t = e;
		var n = 0;
		while (!!t) {
			n += t.offsetTop;
			t = t.offsetParent
		}
		return n
	}
 
	function g() {
		var e = document.documentElement;
		if (!!window.innerWidth) {
			return window.innerHeight
		} else if (e && !isNaN(e.clientHeight)) {
			return e.clientHeight
		}
		return 0
	}
 
	function y() {
		if (window.pageYOffset) {
			return window.pageYOffset
		}
		return Math.max(document.documentElement.scrollTop, document.body.scrollTop)
	}
 
	function E(e) {
		var t = m(e);
		return t >= w && t <= b + w
	}
 
	function S() {
		var e = document.createElement("audio");
		e.setAttribute("class", l);
		e.src = i;
		e.loop = false;
		e.addEventListener("canplay", function() {
			setTimeout(function() {
				x(k)
			}, 500);
			setTimeout(function() {
				N();
				p();
				for (var e = 0; e < O.length; e++) {
					T(O[e])
				}
			}, 15500)
		}, true);
		e.addEventListener("ended", function() {
			N();
			h()
		}, true);
		e.innerHTML = " <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";
		document.body.appendChild(e);
		e.play()
	}
 
	function x(e) {
		e.className += " " + s + " " + o
	}
 
	function T(e) {
		e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)]
	}
 
	function N() {
		var e = document.getElementsByClassName(s);
		var t = new RegExp("\\b" + s + "\\b");
		for (var n = 0; n < e.length; ) {
			e[n].className = e[n].className.replace(t, "")
		}
	}
 
	var e = 30;
	var t = 30;
	var n = 350;
	var r = 350;
	var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";
	var s = "mw-harlem_shake_me";
	var o = "im_first";
	var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"];
	var a = "mw-strobe_light";
	var f = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";
	var l = "mw_added_css";
	var b = g();
	var w = y();
	var C = document.getElementsByTagName("*");
	var k = null;
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			if (E(A)) {
				k = A;
				break
			}
		}
	}
	if (A === null) {
		console.warn("Could not find a node of the right size. Please try a different page.");
		return
	}
	c();
	S();
	var O = [];
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			O.push(A)
		}
	}
})()    '>High一下</a> </li>

  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-06-16T00:35:18.000Z"><a href="/2015/06/16/Performance-and-Stress-testing/">2015-06-16</a></time>
      
      
  
    <h1 class="title">Performance Testing</h1>
  

    </header>
    <div class="entry">
      
        <h1 id="What_is_performance_testing?">What is performance testing?</h1><ul>
<li>It is  a type of non-functional testing.</li>
<li>Performance testing is testing that is performed, to determine how fast some aspect of a system performs under a particular workload. Performance testing measures the quality attributes of the system, such as scalability, reliability and resource usage.</li>
<li>The goal of performance testing is not to find bugs but to eliminate performance bottlenecks.</li>
<li>It can serve different purposes like it can demonstrate that the system meets performance criteria.</li>
<li>It can compare two systems to find which performs better. Or it can measure what part of the system or workload causes the system to perform badly.</li>
<li>This process can involve quantitative tests done in a lab, such as measuring the response time or the number of MIPS (millions of instructions per second) at which a system functions.</li>
</ul>
<a id="more"></a>
<h1 id="Why_do_performance_testing?">Why do performance testing?</h1><p>Performance testing is done to provide stakeholders with information about their application regarding speed, stability and scalability. More importantly, performance testing uncovers what needs to be improved before the product goes to market. Without performance testing, software is likely to suffer from issues such as: running slow while several users use it simultaneously, inconsistencies across different operating systems and poor usability. Performance testing will determine whether or not their software meets speed, scalability and stability requirements under expected workloads. Applications sent to market with poor performance metrics due to non existent or poor performance testing are likely to gain a bad reputation and fail to meet expected sales goals. Also, mission critical applications like space launch programs or life saving medical equipments should be performance tested to ensure that they run for a long period of time without deviations.</p>
<h1 id="Types_of_performance_testing">Types of performance testing</h1><ul>
<li><strong>Load testing</strong> - checks the application’s ability to perform under anticipated user loads. The objective is to identify performance bottlenecks before the software application goes live.</li>
<li><strong>Stress testing</strong> - involves testing an application under extreme workloads to see how it handles high traffic or data processing .The objective is to identify breaking point of an application.</li>
<li><strong>Endurance testing</strong> - is done to make sure the software can handle the expected load over a long period of time.</li>
<li><strong>Spike testing</strong> - tests the software’s reaction to sudden large spikes in the load generated by users.</li>
<li><strong>Volume testing</strong> - Under Volume Testing large no. of. Data is populated in database and the overall software system’s behavior is monitored. The objective is to check software application’s performance under varying database volumes.</li>
<li><strong>Scalability testing</strong> - The objective of scalability testing is to determine the software application’s effectiveness in “scaling up” to support an increase in user load. It helps plan capacity addition to your software system.</li>
</ul>
<h1 id="Common_Performance_Problems">Common Performance Problems</h1><p>Most performance problems revolve around speed, response time, load time and poor scalability. Speed is often one of the most important attributes of an application. A slow running application will lose potential users. Performance testing is done to make sure an app runs fast enough to keep a user’s attention and interest. Take a look at the following list of common performance problems and notice how speed is a common factor in many of them:</p>
<ul>
<li><strong>Long Load time</strong> - Load time is normally the initial time it takes an application to start. This should generally be kept to a minimum. While some applications are impossible to make load in under a minute, Load time should be kept under a few seconds if possible.</li>
<li><strong>Poor response time</strong> - Response time is the time it takes from when a user inputs data into the application until the application outputs a response to that input. Generally this should be very quick. Again if a user has to wait too long, they lose interest.</li>
<li><strong>Poor scalability</strong> - A software product suffers from poor scalability when it cannot handle the expected number of users or when it does not accommodate a wide enough range of users. Load testing should be done to be certain the application can handle the anticipated number of users.</li>
<li><p><strong>Bottlenecking</strong> - Bottlenecks are obstructions in system which degrade overall system performance. Bottlenecking is when either coding errors or hardware issues cause a decrease of throughput under certain loads. Bottlenecking is often caused by one faulty section of code. The key to fixing a bottlenecking issue is to find the section of code that is causing the slow down and try to fix it there. Bottle necking is generally fixed by either fixing poor running processes or adding additional Hardware. Some <strong>common performance bottlenecks</strong> are</p>
<ul>
<li>CPU utilization</li>
<li>Memory utilization</li>
<li>Network utilization</li>
<li>Operating System limitations</li>
<li>Disk usage</li>
</ul>
</li>
</ul>
<h1 id="Performance_Testing_Process">Performance Testing Process</h1><p>The methodology adopted for performance testing can vary widely but the objective for performance tests remain the same. It can help demonstrate that your software system meets certain pre-defined performance criteria. Or it can help compare performance of two software systems. It can also help identify parts of your software system which degrade its performance.</p>
<p>Below is a generic performance testing process:</p>
<p><img src="/img/performance_testing_process.png" alt=""></p>
<ol>
<li><strong>Identify your testing environment</strong> - Know your physical test environment, production environment and what testing tools are available. Understand details of the hardware, software and network configurations used during testing before you begin the testing process. It will help testers create more efficient tests.  It will also help identify possible challenges that testers may encounter during the performance testing procedures.</li>
<li><strong>Identify the performance acceptance criteria</strong> - This includes goals and constraints for throughput, response times and resource allocation.  It is also necessary to identify project success criteria outside of these goals and constraints. Testers should be empowered to set performance criteria and goals because often the project specifications will not include a wide enough variety of performance benchmarks. Sometimes there may be none at all. When possible finding a similar application to compare to is a good way to set performance goals.</li>
<li><strong>Plan &amp; design performance tests</strong> - Determine how usage is likely to vary amongst end users and identify key scenarios to test for all possible use cases. It is necessary to simulate a variety of end users, plan performance test data and outline what metrics will be gathered.</li>
<li><strong>Configuring the test environment</strong> - Prepare the testing environment before execution. Also, arrange tools and other resources.</li>
<li><strong>Implement test design</strong> - Create the performance tests according to your test design.</li>
<li><strong>Run the tests</strong> - Execute and monitor the tests.</li>
<li><strong>Analyze, tune and retest</strong> - Consolidate, analyze and share test results. Then fine tune and test again to see if there is an improvement or decrease in performance. Since improvements generally grow smaller with each retest, stop when bottlenecking is caused by the CPU. Then you may have the consider option of increasing CPU power.</li>
</ol>
<h1 id="Performance_Parameters_Monitored">Performance Parameters Monitored</h1><p>The basic parameters monitored during performance testing include:</p>
<p><img src="/img/performancetestingparameters.png" alt=""></p>
<ul>
<li><strong>Processor Usage</strong> - amount of time processor spends executing non-idle threads.</li>
<li><strong>Memory use</strong> - amount of physical memory available to processes on a computer.</li>
<li><strong>Disk time</strong> - amount of time disk is busy executing a read or write request.</li>
<li><strong>Bandwidth</strong> - shows the bits per second used by a network interface.</li>
<li><strong>Private bytes</strong> - number of bytes a process has allocated that can’t be shared amongst other processes. These are used to measure memory leaks and usage.</li>
<li><strong>Committed memory</strong> - amount of virtual memory used.</li>
<li><strong>Memory pages/second</strong> - number of pages written to or read from the disk in order to resolve hard page faults. Hard page faults are when code not from the current working set is called up from elsewhere and retrieved from a disk.</li>
<li><strong>Page faults/second</strong> - the overall rate in which fault pages are processed by the processor. This again occurs when a process requires code from outside its working set.</li>
<li><strong>CPU interrupts per second</strong> - is the avg. number of hardware interrupts a processor is receiving and processing each second.</li>
<li><strong>Disk queue length</strong> - is the avg. no. of read and write requests queued for the selected disk during a sample interval.</li>
<li><strong>Network output queue length</strong> - length of the output packet queue in packets. Anything more than two means a delay and bottlenecking needs to be stopped.</li>
<li><strong>Network bytes total per second</strong> - rate which bytes are sent and received on the interface including framing characters.</li>
<li><strong>Response time</strong> - time from when a user enters a request until the first character of the response is received.</li>
<li><strong>Throughput</strong> - rate a computer or network receives requests per second.</li>
<li><strong>Amount of connection pooling</strong> - the number of user requests that are met by pooled connections. The more requests met by connections in the pool, the better the performance will be.</li>
<li><strong>Maximum active sessions</strong> - the maximum number of sessions that can be active at once.</li>
<li><strong>Hit ratios</strong> - This has to do with the number of SQL statements that are handled by cached data instead of expensive I/O operations. This is a good place to start for solving bottlenecking issues.</li>
<li><strong>Hits per second</strong> - the no. of hits on a web server during each second of a load test.</li>
<li><strong>Rollback segment</strong> - the amount of data that can rollback at any point in time.</li>
<li><strong>Database locks</strong> - locking of tables and databases needs to be monitored and carefully tuned.</li>
<li><strong>Top waits</strong> - are monitored to determine what wait times can be cut down when dealing with the how fast data is retrieved from memory.</li>
<li><strong>Thread counts</strong> - An applications health can be measured by the no. of threads that are running and currently active.</li>
<li><strong>Garbage collection</strong> - has to do with returning unused memory back to the system. Garbage collection needs to be monitored for efficiency.</li>
</ul>
<p>CPU performance indicators:</p>
<ul>
<li>CPU clock speed</li>
<li>CPU Cache size</li>
<li>Front-side bus (FSB) speed(Intel)</li>
</ul>
<p>Memory performance indicators:</p>
<ul>
<li>Throughput</li>
</ul>
<p>Disk performance indicators:</p>
<ul>
<li>Input/Output Operations Per Second(IOPS)</li>
<li>Bandwidth</li>
<li>Throughput</li>
<li>Latency - the average time for the processing of a single request</li>
</ul>
<p>Network performance indicators:</p>
<ul>
<li>Availability</li>
<li>Latency</li>
<li>Utilization rate</li>
<li>Throughput</li>
<li>Bandwidth</li>
</ul>
<h1 id="Xen_performance_indicators">Xen performance indicators</h1><p>Currently, we do performance testing for xen guest’s CPU, Memory, Disk and Network. We mainly focus on the guest side not the hypervisor side.</p>
<p>We choose the following combination of tools to test xen guest performance:</p>
<ul>
<li>CPU - nbench</li>
<li>Memory - LMbench</li>
<li>Disk - fio</li>
<li>Network - netperf</li>
</ul>
<h1 id="Performance_Test_Tools">Performance Test Tools</h1><p>There are a wide variety of performance testing tools available in market. The tool you choose for testing will depend on many factors such as types of protocol supported , license cost , hardware requirements , platform support etc. Below is a list of popularly used testing tools.</p>
<h2 id="CPU">CPU</h2><ul>
<li><code>time echo &quot;scale=5000;4*a(1)&quot;|bc -l -q</code></li>
<li><strong>nbench</strong> - is a synthetic computing benchmark program developed in the mid-1990s by the now defunct BYTE magazine intended to measure a computer’s CPU, FPU, and Memory System speed.</li>
</ul>
<h2 id="Memory">Memory</h2><ul>
<li><strong>LMbench</strong> - is a suite of simple, portable, ANSI/C microbenchmarks for UNIX/POSIX. In general, it measures two key features: latency and bandwidth.</li>
</ul>
<h2 id="Disk">Disk</h2><ul>
<li><strong>dd</strong> - The most simple tool used to test disk performance.</li>
<li><strong>fio</strong> - is a tool that will spawn a number of threads or processes doing a particular type of io action as specified by the user.</li>
<li><strong>iozone</strong> - is a filesystem benchmark tool. The benchmark generates and measures a variety of file operations.</li>
<li><strong>bonnie++</strong> - is a benchmark suite that is aimed at performing a number of simple tests of hard drive and file system performance or the lack therof.</li>
<li><strong>dbench</strong> - is a tool to generate I/O workloads to either a filesystem or to a networked CIFS or NFS server. It can be used to stress a filesystem or a server to see which workload it becomes saturated and can also be used for preditcion analysis to determine “How many concurrent clients/applications performing this workload can my server handle before response starts to lag?”</li>
<li><strong>iometer</strong> —</li>
<li><strong>hdparm</strong> -</li>
</ul>
<h2 id="Network">Network</h2><ul>
<li><strong>netperf</strong> - is a benchmark that can be used to measure various aspects of networking performance. Currently, its focus is on bulk data transfer and request/response performance using either TCP or UDP, and the Berkeley Sockets interface. In addition, tests for DLPI, and Unix Domain Sockets, tests for IPv6 may be conditionally compiled-in.</li>
<li><strong>iperf</strong> -<h2 id="Mysql">Mysql</h2></li>
</ul>
<h2 id="HTTP">HTTP</h2><h2 id="Java">Java</h2><h2 id="System">System</h2><h1 id="Summary">Summary</h1><p>Performance testing is necessary before marketing any software product. It ensures customer satisfaction &amp; protects investor’s investment against product failure. Costs of performance testing are usually more than made up for with improved customer satisfaction, loyalty and retention.</p>
<h1 id="Reference">Reference</h1><ul>
<li><a href="http://www.gnutoolbox.com/linux-benchmark-tools/" target="_blank" rel="external">Linux Benchmark Tools</a></li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/Technology/">Technology</a>
  </div>

        
<!-- Baidu Button BEGIN -->
<div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare">
<a class="bds_qzone"></a>
<a class="bds_tsina"></a>
<a class="bds_tqq"></a>
<a class="bds_renren"></a>
<a class="bds_t163"></a>
<span class="bds_more"></span>
<a class="shareCount"></a>
</div>
<script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=3326447" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
</script>
<!-- Baidu Button END -->      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">

<nav id="pagination" >
    
    <a href="/2015/06/17/netperf/" class="alignleft prev" >上一页</a>
    
    
    <a href="/2015/06/15/SR-IOV-Presentation/" class="alignright next" >下一页</a>
    
    <div class="clearfix"></div>
</nav>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"孔令飞"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->  
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:konglf.github.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Technology/Emacs/">Emacs</a><small>1</small></li>
  
    <li><a href="/categories/Technology/Keys/">Keys</a><small>2</small></li>
  
    <li><a href="/categories/Technology/Lex/">Lex</a><small>2</small></li>
  
    <li><a href="/categories/Technology/Linux/">Linux</a><small>1</small></li>
  
    <li><a href="/categories/essay/Linux/">Linux</a><small>1</small></li>
  
    <li><a href="/categories/Technology/Python/">Python</a><small>2</small></li>
  
    <li><a href="/categories/Technology/Shell/">Shell</a><small>1</small></li>
  
    <li><a href="/categories/Technology/">Technology</a><small>30</small></li>
  
    <li><a href="/categories/Technology/Xen/Virtualization/">Virtualization</a><small>1</small></li>
  
    <li><a href="/categories/Technology/Xen/">Xen</a><small>1</small></li>
  
    <li><a href="/categories/essay/">essay</a><small>4</small></li>
  
  </ul>
</div>


  <div class="widget tag">
<h3 class="title">简介</h3>
<ul class="entry">
<li>中文名：孔令飞</li>
<li>英文名：Alex</li>
<li>现状：Lenovo从事存储性能优化</li>
<li>QQ号：466701708</li>
<li>想交友的朋友请<a href="http://kongll.github.io/about">联系我</a>！</li>
<li>我的<a href="http://blog.csdn.net/lnxfei">CSDN</a>博客</li>
</ul>
</div>


  <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3768665395&verifier=bc944b64&dpc=1"></iframe>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/Xen/" style="font-size: 10px;">Xen</a> <a href="/tags/emacs/" style="font-size: 20px;">emacs</a> <a href="/tags/博客技巧/" style="font-size: 10px;">博客技巧</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Lingfei Kong
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>


<a href="https://github.com/alex8866" target="_blank"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_white_ffffff.png" alt="Fork me on GitHub"></a>
