

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>nbench | Lingfei&#39;s Blog</title>
  <meta name="author" content="Lingfei Kong">
  
  <meta name="description" content="读书笔记，资料整理">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="nbench"/>
  <meta property="og:site_name" content="Lingfei&#39;s Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="http://kongll.github.io/atom.xml" title="Lingfei&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ffe3814b5f53cc394a493cbeb2368f2af' type='text/javascript'%3E%3C/script%3E"));
</script>



</head>


<body>
  <header id="header" class="inner">
<div class="alignleft">
  <h1><a href="/">Lingfei&#39;s Blog</a></h1>
  <h2><a href="/">我要扼住命运的咽喉，决不能让命运使我屈服</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/categories/Technology">技术</a></li>
    
      <li><a href="/categories/essay">随笔</a></li>
    
      <li><a href="/archives">归档</a></li>
    
      <li><a href="/about">关于</a></li>
    
	<li> <a href="/atom.xml">RSS</a> </li>
<li> <a title="把这个链接拖到你的Chrome收藏夹工具栏中" href='javascript:(function() {
	function c() {
		var e = document.createElement("link");
		e.setAttribute("type", "text/css");
		e.setAttribute("rel", "stylesheet");
		e.setAttribute("href", f);
		e.setAttribute("class", l);
		document.body.appendChild(e)
	}
 
	function h() {
		var e = document.getElementsByClassName(l);
		for (var t = 0; t < e.length; t++) {
			document.body.removeChild(e[t])
		}
	}
 
	function p() {
		var e = document.createElement("div");
		e.setAttribute("class", a);
		document.body.appendChild(e);
		setTimeout(function() {
			document.body.removeChild(e)
		}, 100)
	}
 
	function d(e) {
		return {
			height : e.offsetHeight,
			width : e.offsetWidth
		}
	}
 
	function v(i) {
		var s = d(i);
		return s.height > e && s.height < n && s.width > t && s.width < r
	}
 
	function m(e) {
		var t = e;
		var n = 0;
		while (!!t) {
			n += t.offsetTop;
			t = t.offsetParent
		}
		return n
	}
 
	function g() {
		var e = document.documentElement;
		if (!!window.innerWidth) {
			return window.innerHeight
		} else if (e && !isNaN(e.clientHeight)) {
			return e.clientHeight
		}
		return 0
	}
 
	function y() {
		if (window.pageYOffset) {
			return window.pageYOffset
		}
		return Math.max(document.documentElement.scrollTop, document.body.scrollTop)
	}
 
	function E(e) {
		var t = m(e);
		return t >= w && t <= b + w
	}
 
	function S() {
		var e = document.createElement("audio");
		e.setAttribute("class", l);
		e.src = i;
		e.loop = false;
		e.addEventListener("canplay", function() {
			setTimeout(function() {
				x(k)
			}, 500);
			setTimeout(function() {
				N();
				p();
				for (var e = 0; e < O.length; e++) {
					T(O[e])
				}
			}, 15500)
		}, true);
		e.addEventListener("ended", function() {
			N();
			h()
		}, true);
		e.innerHTML = " <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";
		document.body.appendChild(e);
		e.play()
	}
 
	function x(e) {
		e.className += " " + s + " " + o
	}
 
	function T(e) {
		e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)]
	}
 
	function N() {
		var e = document.getElementsByClassName(s);
		var t = new RegExp("\\b" + s + "\\b");
		for (var n = 0; n < e.length; ) {
			e[n].className = e[n].className.replace(t, "")
		}
	}
 
	var e = 30;
	var t = 30;
	var n = 350;
	var r = 350;
	var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";
	var s = "mw-harlem_shake_me";
	var o = "im_first";
	var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"];
	var a = "mw-strobe_light";
	var f = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";
	var l = "mw_added_css";
	var b = g();
	var w = y();
	var C = document.getElementsByTagName("*");
	var k = null;
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			if (E(A)) {
				k = A;
				break
			}
		}
	}
	if (A === null) {
		console.warn("Could not find a node of the right size. Please try a different page.");
		return
	}
	c();
	S();
	var O = [];
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			O.push(A)
		}
	}
})()    '>High一下</a> </li>

  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-06-13T00:35:18.000Z"><a href="/2015/06/13/nbench/">2015-06-13</a></time>
      
      
  
    <h1 class="title">nbench</h1>
  

    </header>
    <div class="entry">
      
        <h1 id="How_to_install_nbench">How to install nbench</h1><ol>
<li><p>Download nbench from: <a href="http://www.tux.org/~mayer/linux/nbench-byte-2.2.3.tar.gz" target="_blank" rel="external">http://www.tux.org/~mayer/linux/nbench-byte-2.2.3.tar.gz</a></p>
</li>
<li><p>Extract and install it:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tar -xvzf nbench-byte-XXXX.tar.gz</span></span><br><span class="line"><span class="comment"># cd nbench-byte-XXXX</span></span><br><span class="line"><span class="comment"># make</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<a id="more"></a>
<p><strong>Note:</strong> You need to install glibc-static package on your guest.</p>
<h1 id="Features_and_Functions">Features and Functions</h1><ul>
<li>Numeric sort - Sorts an array of long integers.</li>
<li>String sort - Sorts an array of strings of arbitrary length.</li>
<li>Bitfield - Executes a variety of bit manipulation functions.</li>
<li>Emulated floating-point - A small software floating-point package.</li>
<li>Fourier coefficients - A numerical analysis routine for calculating series approximations of waveforms.</li>
<li>Assignment algorithm - A well-known task allocation algorithm.</li>
<li>Huffman compression - A well-known text and graphics compression algorithm.</li>
<li>IDEA encryption - A relatively new block cipher algorithm.</li>
<li>Neural Net - A small but functional back-propagation network simulator.</li>
<li>LU Decomposition - A robust algorithm for solving linear equations.</li>
</ul>
<p>A run of the benchmark suite consists essentially of two phases for each of the tests. First, a calibration loop is run to determine the size of the problem the system can handle in a reasonable time, in order to adapt to the ever faster computer hardware available. Second, the actual test is run repeatedly several times to obtain a statistically meaningful result.</p>
<p>Originally, NBench and BYTEmark produced two overall index figures: Integer index and Floating-point index. The Integer index is the geometric mean of those tests that involve only integer processing—numeric sort, string sort, bitfield, emulated floating-point, assignment, Huffman, and IDEA—while the Floating-point index is the geometric mean of those tests that require the floating-point coprocessor—Fourier, neural net, and LU decomposition. The index figures where relative scores to get a general feel for the performance of the machine under test as compared to a baseline system based on a 90 MHz Pentium Intel CPU.</p>
<p>The Linux/Unix port has a second baseline machine, it is an AMD K6/233 with 32 MB RAM and 512 KB L2-cache running Linux 2.0.32 and using GNU gcc version 2.7.2.3 and libc-5.4.38. The original integer index was split into an integer-operation and a memory-operation index, as suggested by Andrew D. Balsa, reflecting the realization that memory management is important in CPU design. The original tests have been left alone, however, the geometric mean of the tests numeric sort, floating-point emulation, IDEA, and Huffman now constitutes the integer-arithmetic focused benchmark index, while the geometric mean of the tests string sort, bitfield, and assignment makes up the new memory index. The floating point index has been left alone, it is still the geometric mean of fourier, neural net, and LU decomposition.</p>
<h1 id="How_to_use_nbench">How to use nbench</h1><p>nbench is very easy to run, just issue command <code>./nbench</code> and take a cup of coffee to wait the results.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd nbench-byte-XXXX</span></span><br><span class="line"><span class="comment"># ./nbench</span></span><br><span class="line"></span><br><span class="line">BYTEmark* Native Mode Benchmark ver. <span class="number">2</span> (<span class="number">10</span>/<span class="number">95</span>)</span><br><span class="line">Index-split by Andrew D. Balsa (<span class="number">11</span>/<span class="number">97</span>)</span><br><span class="line">Linux/Unix* port by Uwe F. Mayer (<span class="number">12</span>/<span class="number">96</span>,<span class="number">11</span>/<span class="number">97</span>)</span><br><span class="line"></span><br><span class="line">TEST                : Iterations/sec.  : Old Index   : New Index</span><br><span class="line">                    :                  : Pentium <span class="number">90</span>* : AMD K6/<span class="number">233</span>*</span><br><span class="line">--------------------:------------------:-------------:------------</span><br><span class="line">NUMERIC SORT        :          <span class="number">1274.9</span>  :      <span class="number">32.69</span>  :      <span class="number">10.74</span></span><br><span class="line">STRING SORT         :          <span class="number">545.29</span>  :     <span class="number">243.65</span>  :      <span class="number">37.71</span></span><br><span class="line">BITFIELD            :      <span class="number">3.9117</span>e+<span class="number">08</span>  :      <span class="number">67.10</span>  :      <span class="number">14.02</span></span><br><span class="line">FP EMULATION        :          <span class="number">195.95</span>  :      <span class="number">94.03</span>  :      <span class="number">21.70</span></span><br><span class="line">FOURIER             :           <span class="number">24257</span>  :      <span class="number">27.59</span>  :      <span class="number">15.49</span></span><br><span class="line">ASSIGNMENT          :          <span class="number">30.302</span>  :     <span class="number">115.30</span>  :      <span class="number">29.91</span></span><br><span class="line">IDEA                :          <span class="number">5556.7</span>  :      <span class="number">84.99</span>  :      <span class="number">25.23</span></span><br><span class="line">HUFFMAN             :          <span class="number">2032.3</span>  :      <span class="number">56.36</span>  :      <span class="number">18.00</span></span><br><span class="line">NEURAL NET          :           <span class="number">59.18</span>  :      <span class="number">95.07</span>  :      <span class="number">39.99</span></span><br><span class="line">LU DECOMPOSITION    :          <span class="number">1486.4</span>  :      <span class="number">77.00</span>  :      <span class="number">55.60</span></span><br><span class="line">==========================ORIGINAL BYTEMARK RESULTS==========================</span><br><span class="line">INTEGER INDEX       : <span class="number">83.268</span></span><br><span class="line">FLOATING-POINT INDEX: <span class="number">58.668</span></span><br><span class="line">Baseline (MSDOS*)   : Pentium* <span class="number">90</span>, <span class="number">256</span> KB L2-cache, Watcom* compiler <span class="number">10.0</span></span><br><span class="line">==============================LINUX DATA BELOW===============================</span><br><span class="line">CPU                 : <span class="number">4</span> CPU GenuineIntel Intel(R) Xeon(R) CPU           E5620  @ <span class="number">2.40</span>GHz <span class="number">2394</span>MHz</span><br><span class="line">L2 Cache            : <span class="number">12288</span> KB</span><br><span class="line">OS                  : Linux <span class="number">3.10</span>.<span class="number">0</span>-<span class="number">229</span>.el7.x86_64</span><br><span class="line">C compiler          : gcc version <span class="number">4.8</span>.<span class="number">3</span> <span class="number">20140911</span> (Red Hat <span class="number">4.8</span>.<span class="number">3</span>-<span class="number">9</span>) (GCC)</span><br><span class="line">libc                : libc-<span class="number">2.17</span>.so</span><br><span class="line">MEMORY INDEX        : <span class="number">25.097</span></span><br><span class="line">INTEGER INDEX       : <span class="number">18.035</span></span><br><span class="line">FLOATING-POINT INDEX: <span class="number">32.539</span></span><br><span class="line">Baseline (LINUX)    : AMD K6/<span class="number">233</span>*, <span class="number">512</span> KB L2-cache, gcc <span class="number">2.7</span>.<span class="number">2.3</span>, libc-<span class="number">5.4</span>.<span class="number">38</span></span><br><span class="line">* Trademarks are property of their respective holder.</span><br></pre></td></tr></table></figure>
<h1 id="Results_analysis">Results analysis</h1><p>There are three performance indicators: <strong>MEMORY INDEX</strong>, <strong>INTEGER INDEX</strong>, <strong>FLOATING-POINT INDEX</strong>, for these indicators the larger the better.</p>
<p><strong>MEMORY INDEX</strong> - The performance of front-side bus (FSB) and cpu cache size.<br><strong>INTEGER INDEX</strong> - Integer processing performance.<br><strong>FLOATING-POINT INDEX</strong> - Double-precision floating-point processing performance.</p>
<p><strong>Note:</strong> There is a <em>RESULTS</em> file under nbench-byte-XXXX, you can compare your results with the results in the <em>RESULTS</em> file.</p>
<h1 id="The_main_parameters">The main parameters</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ./nbench -h</span></span><br><span class="line">Usage: ./nbench [-v] [-c&lt;FILE&gt;]</span><br><span class="line"> -v = verbose</span><br><span class="line"> -c = input parameters thru <span class="built_in">command</span> file &lt;FILE&gt;</span><br></pre></td></tr></table></figure>
<p>You see, nbench is very easy to use.</p>
<h1 id="Shortcomings">Shortcomings</h1><ul>
<li>These benchmarks are meant to expose the theoretical upper limit of the CPU, FPU, and memory architecture of a system. They cannot measure video, disk, or network throughput (those are the domains of a different set of benchmarks).</li>
<li>NBench is single-threaded. Currently, each benchmark test uses only a single execution thread. However, most modern operating systems have some multitasking component. How a system “scales” as more tasks are run simultaneously is an effect that NBench does not explore.</li>
</ul>
<h1 id="Reference">Reference</h1><ul>
<li><a href="http://www.tux.org/~mayer/linux/bmark.html" target="_blank" rel="external">Linux/Unix NBench</a></li>
<li><a href="http://www.tux.org/~mayer/linux/byte/bdoc.pdf" target="_blank" rel="external">Original NBench documentation (archived snapshot)</a></li>
<li><a href="http://www.tux.org/~mayer/linux/results2.html" target="_blank" rel="external">NBench Results</a></li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/Technology/">Technology</a>
  </div>

        
<!-- Baidu Button BEGIN -->
<div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare">
<a class="bds_qzone"></a>
<a class="bds_tsina"></a>
<a class="bds_tqq"></a>
<a class="bds_renren"></a>
<a class="bds_t163"></a>
<span class="bds_more"></span>
<a class="shareCount"></a>
</div>
<script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=3326447" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
</script>
<!-- Baidu Button END -->      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">

<nav id="pagination" >
    
    <a href="/2015/06/14/shell实现的windows回收站功能的脚本/" class="alignleft prev" >上一页</a>
    
    
    <a href="/2015/06/12/Python学习笔记/" class="alignright next" >下一页</a>
    
    <div class="clearfix"></div>
</nav>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"孔令飞"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->  
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:konglf.github.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Technology/Emacs/">Emacs</a><small>1</small></li>
  
    <li><a href="/categories/Technology/Keys/">Keys</a><small>2</small></li>
  
    <li><a href="/categories/Technology/Lex/">Lex</a><small>2</small></li>
  
    <li><a href="/categories/Technology/Linux/">Linux</a><small>1</small></li>
  
    <li><a href="/categories/essay/Linux/">Linux</a><small>1</small></li>
  
    <li><a href="/categories/Technology/Python/">Python</a><small>2</small></li>
  
    <li><a href="/categories/Technology/Shell/">Shell</a><small>1</small></li>
  
    <li><a href="/categories/Technology/">Technology</a><small>30</small></li>
  
    <li><a href="/categories/Technology/Xen/Virtualization/">Virtualization</a><small>1</small></li>
  
    <li><a href="/categories/Technology/Xen/">Xen</a><small>1</small></li>
  
    <li><a href="/categories/essay/">essay</a><small>3</small></li>
  
  </ul>
</div>


  <div class="widget tag">
<h3 class="title">简介</h3>
<ul class="entry">
<li>中文名：孔令飞</li>
<li>英文名：Alex</li>
<li>现状：Lenovo从事存储性能优化</li>
<li>QQ号：466701708</li>
<li>想交友的朋友请<a href="http://kongll.github.io/about">联系我</a>！</li>
<li>我的<a href="http://blog.csdn.net/lnxfei">CSDN</a>博客</li>
</ul>
</div>


  <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3768665395&verifier=bc944b64&dpc=1"></iframe>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/Xen/" style="font-size: 10px;">Xen</a> <a href="/tags/emacs/" style="font-size: 20px;">emacs</a> <a href="/tags/博客技巧/" style="font-size: 10px;">博客技巧</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Lingfei Kong
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>


<a href="https://github.com/alex8866" target="_blank"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_white_ffffff.png" alt="Fork me on GitHub"></a>
